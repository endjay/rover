group 'org.endjay'
version '1.0'

apply plugin: 'groovy'
apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'idea'

sourceCompatibility = 1.5

def mainClassNameProject = 'org.endjay.rover.Rover'
def projName = 'rover'
repositories {
    mavenCentral()
}

dependencies {
    compile 'org.codehaus.groovy:groovy-all:2.3.11'
    testCompile group: 'junit', name: 'junit', version: '4.11'
}



jar {
    from {
        (configurations.runtime).collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
    manifest {
        attributes 'Main-Class': mainClassNameProject
    }
}

startScripts.enabled = false

task runRover(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    main = mainClassNameProject
}

task roverBuild(type: CreateStartScripts) {
    mainClassName = mainClassNameProject
    applicationName = projName
    outputDir = new File(project.buildDir, 'tmp')
    classpath = jar.outputs.files + project.configurations.runtime
}


